<meta title="check控件" />
<div>
    <h2 class="page-header">check选中控件</h2>
    <p class="lead">此控件可以为表格、列表添加行选中功能。</p>
    <h3 id="define" s-window-role="a" title="控件定义">1. 控件定义</h3>
    <p><code>s="check"</code></p>
    <h4>参数配置</h4>
    <ol>
        <li><code>i-checked-class</code>：check的项选中的时候，为该项添加的class，默认为 <code>warning</code></li>
        <li><code>h-checked-class</code>：选项的操作句柄选中时添加的class，默认为 <code>s-ui-checked</code></li>
        <li><code>multiple</code>：是否是多选，默认为 <code>"true"</code></li>
        <li><code>check-path</code>：是否开启根据check-path的父子关系进行check。
            check-path的格式应为：<code>/0/1/2/3/4</code> 这样的格式。该选项格式可以操作树型表格的父子关系。</li>
    </ol>
    <h4>其他配置</h4>
    <ol>
        <li><code>s-check-role='i'</code>：定义选项</li>
        <li><code>s-check-role='h'</code>：定义选项的操作句柄，定义了该元素之后，只能通过该元素对选项进行check操作</li>
    </ol>
    <hr />
    <h3 id="example" s-window-role="a" title="示例(多选模式)">2. 示例(多选模式)</h3>
    <p>
        <table class="table table-bordered table-striped table-hover" style="width: 500px;">
            <thead>
                <tr>
                    <th>姓名</th>
                    <th>体积</th>
                    <th>类型</th>
                </tr>
            </thead>
            <tbody s="loop,check" s-smart-data="ctx:userData" >
                <tr s-loop-role="row" s-check-role="i" s="datac,row">
                    <td s s-smart-key="name"></td>
                    <td s s-smart-key="tj"></td>
                    <td s s-smart-key="kind"></td>
                </tr>
            </tbody>
        </table>
        <script type="text/javascript">
            var userData = [
                {
                    name: "Jerry",
                    tj: "Small",
                    kind: "Mouse"
                },
                {
                    name: "Tom",
                    tj: "Big",
                    kind: "Cat"
                }
            ];
        </script>
    </p>
    <h4>源码</h4>
<pre>
&lt;table class="table table-bordered table-striped table-hover" style="width: 500px;"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;姓名&lt;/th&gt;
        &lt;th&gt;体积&lt;/th&gt;
        &lt;th&gt;类型&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody s="loop,check" s-smart-data="ctx:userData" &gt;
    &lt;tr s-loop-role="row" <abbr class="text-warning" title="声明该行可以选中">s-check-role="i"</abbr> s="datac,row"&gt;
        &lt;td s s-smart-key="name"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="tj"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="kind"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
&lt;script type="text/javascript"&gt;
    var userData = [
        {
            name: "Jerry",
            tj: "Small",
            kind: "Mouse"
        },
        {
            name: "Tom",
            tj: "Big",
            kind: "Cat"
        }
    ];
&lt;/script&gt;
</pre>
    <hr />
    <h3 id="single" s-window-role="a" title="示例(单选模式)">3. 示例(单选模式)</h3>
    <p class="lead">配置 <code>s-check-multiple="false"</code> 即可定义选中模式是单选。如：<code>&lt;div s="check" s-check-multiple="false" &gt;...&lt;/div&gt;</code></p>
    <p>
    <table class="table table-bordered table-striped table-hover" style="width: 500px;">
        <thead>
        <tr>
            <th>姓名</th>
            <th>体积</th>
            <th>类型</th>
        </tr>
        </thead>
        <tbody s="loop,check" s-check-multiple="false" s-smart-data="ctx:userData"  >
        <tr s-loop-role="row" s-check-role="i" s="datac,row">
            <td s s-smart-key="name"></td>
            <td s s-smart-key="tj"></td>
            <td s s-smart-key="kind"></td>
        </tr>
        </tbody>
    </table>
    </p>
    <hr />
    <h3 id="checkhandler" s-window-role="a" title="示例(单选模式)">4. 添加行选中器</h3>
    <p class="lead">为每行添加行选中器，如：checkbox，但不仅限于checkbox，可以是任何元素。</p>
    <table class="table table-bordered table-striped table-hover" style="width: 500px;">
        <thead>
        <tr>
            <th></th>
            <th style="width: 40%;">姓名</th>
            <th style="width: 30%;">体积</th>
            <th style="width: 30%;">类型</th>
        </tr>
        </thead>
        <tbody s="loop,check" s-check-multiple="false" s-smart-data="ctx:userData"  >
        <tr s-loop-role="row" s-check-role="i" s="datac,row">
            <td><input type="checkbox" s-check-role="h"/></td>
            <td s s-smart-key="name"></td>
            <td s s-smart-key="tj"></td>
            <td s s-smart-key="kind"></td>
        </tr>
        </tbody>
    </table>
    <h4>源码</h4>
<pre>
&lt;table class="table table-bordered table-striped table-hover" style="width: 500px;"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;/th&gt;
        &lt;th style="width: 40%;"&gt;姓名&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;体积&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;类型&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody s="loop,check" s-check-multiple="false" s-smart-data="ctx:userData"  &gt;
    &lt;tr s-loop-role="row" <abbr class="text-warning" title="通过为该元素添加 s-check-role='h' 元素，来声明该元素只能通过 s-check-role='h' 元素选中">s-check-role="i"</abbr> s="datac,row"&gt;
        &lt;td&gt;&lt;input type="checkbox" <abbr class="text-warning" title="行选中器，声明了之后，只能通过该选中器选中 s-check-role='i' 元素">s-check-role="h"</abbr>/&gt;&lt;/td&gt;
        &lt;td s s-smart-key="name"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="tj"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="kind"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
</pre>
    <p class="lead">通过添加 <code>s-check-role="h"</code> 的元素，来声明只能通过该元素去选中 <code>s-check-role='i'</code> 元素。</p>
    <hr />
    <h3 id="checkAll" s-window-role="a" title="示例(全选)">5. 示例(全选)</h3>
    <h4>使用 <code>s-check-checkall-h</code> 配置声明全选按钮</h4>
    <table class="table table-bordered table-striped table-hover" style="width: 500px;">
        <thead>
        <tr>
            <th><input type="checkbox" s-check-role="checkall" id="checkAll4" /></th>
            <th style="width: 40%;">姓名</th>
            <th style="width: 30%;">体积</th>
            <th style="width: 30%;">类型</th>
        </tr>
        </thead>
        <tbody s="loop,check" s-smart-data="ctx:userData" s-check-checkall-h="S.N('#checkAll4')" >
        <tr s-loop-role="row" s-check-role="i" s="datac,row">
            <td><input type="checkbox" s-check-role="h"/></td>
            <td s s-smart-key="name"></td>
            <td s s-smart-key="tj"></td>
            <td s s-smart-key="kind"></td>
        </tr>
        </tbody>
    </table>
    <p>源码</p>
<pre>
&lt;table class="table table-bordered table-striped table-hover" style="width: 500px;"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;input type="checkbox" <abbr class="text-success">id="checkAll4"</abbr> /&gt;&lt;/th&gt;
        &lt;th style="width: 40%;"&gt;姓名&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;体积&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;类型&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody s="loop,check" s-smart-data="ctx:userData" <abbr class="text-warning" title="声明全选按钮">s-check-checkall-h="<span class="text-success">S.N('#checkAll4')</span>"</abbr> &gt;
    &lt;tr s-loop-role="row" s-check-role="i" s="datac,row"&gt;
        &lt;td&gt;&lt;input type="checkbox" s-check-role="h"/&gt;&lt;/td&gt;
        &lt;td s s-smart-key="name"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="tj"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="kind"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table>    
</pre>
    <h4>使用 <code>s-check-role="checkall-h"</code> 声明全选按钮，该按钮必须是check控件的子元素。</h4>
    <table s="check" class="table table-bordered table-striped table-hover" style="width: 500px;">
        <thead>
        <tr>
            <th><input type="checkbox" s-check-role="checkall-h" /></th>
            <th style="width: 40%;">姓名</th>
            <th style="width: 30%;">体积</th>
            <th style="width: 30%;">类型</th>
        </tr>
        </thead>
        <tbody s="loop" s-smart-data="ctx:userData" >
        <tr s-loop-role="row" s-check-role="i" s="datac,row">
            <td >
                <input type="checkbox" s-check-role="h"/>
            </td>
            <td s s-smart-key="name"></td>
            <td s s-smart-key="tj"></td>
            <td s s-smart-key="kind"></td>
        </tr>
        </tbody>
    </table>
    <p>源码</p>
<pre>
&lt;table <abbr class="text-warning" title="check控件">s="check"</abbr> class="table table-bordered table-striped table-hover" style="width: 500px;"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;input type="checkbox" <abbr class="text-warning" title="声明该元素是check控件的全选按钮，该元素必须是check控件的子元素">s-check-role="checkall-h"</abbr> /&gt;&lt;/th&gt;
        &lt;th style="width: 40%;"&gt;姓名&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;体积&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;类型&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody s="loop" s-smart-data="ctx:userData" &gt;
    &lt;tr s-loop-role="row" s-check-role="i" s="datac,row"&gt;
        &lt;td &gt;
            &lt;input type="checkbox" s-check-role="h"/&gt;
        &lt;/td&gt;
        &lt;td s s-smart-key="name"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="tj"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="kind"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
</pre>
<hr />
    <h3 id="treeChecked" s-window-role="a" title="TreeGrid示例">6. TreeGrid示例</h3>
    <p class="lead">TreeGrid的构建是通过 <code>loop</code>,<code>loopCheckCombine</code>,<code>check</code> 三个控件组合构建起来的。</p>
    <table s="check" s-check-path="true" class="table table-bordered table-striped table-hover" style="width: 800px;">
        <thead>
        <tr>
            <th><input type="checkbox" s-check-role="checkall-h"/> </th>
            <th style="width: 60%;">分类名</th>
            <th style="width: 20%;">数量</th>
            <th style="width: 20%;" class="text-right">操作</th>
        </tr>
        </thead>
        <tbody s="loop,loopCheckCombine" s-loop-type="tree" s-loop-tree-indent-width="20"
               s-loop-tree-indent-str="— "
               s-smart-data="ctx:treeData" >
        <tr s-loop-role="row" s-check-role="i" s="datac,row">
            <td><input type="checkbox" s-check-role="h"/></td>
            <td s-loop-tree-role="indent">
                <span s s-smart-key="name"></span>
            </td>
            <td s s-smart-key="num"></td>
            <td class="text-right"><a href="#">编辑</a></td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td><input type="checkbox" s-check-role="checkall-h"/></th>
            <td colspan="3"></th>
        </tr>
    </table>
    <script type="text/javascript">
        var treeData = [
            {
                name: "游泳池",num: 20
            },
            {
                name: "美食",
                num: "1239",
                children: [
                    {
                        name:"本帮江浙菜",num:454,
                        children: [
                            {name:"蟹宴", num:"30"},
                            {name:"杭帮菜", num:"40"},
                            {name:"绍兴菜", num:"50"},
                        ]
                    }
                ]
            },
            {
                name: "足球场",num: 30
            },
            {
                name: "羽毛球馆",num: 70
            },
            {
                name: "汽车",
                num: "304",
                children: [
                    {name:"小型车",num:50},
                    {name:"紧凑型车",num:40},
                    {name:"中型车",num:30},
                    {name:"豪华车",num:20}
                ]
            }
        ];
    </script>
    <h4>源码</h4>
<pre>
&lt;table <abbr class="text-warning" title="check控件定义">s="check"</abbr> class="table table-bordered table-striped table-hover" style="width: 800px;"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;input type="checkbox" s-check-role="checkall-h"/&gt; &lt;/th&gt;
        &lt;th style="width: 60%;"&gt;分类名&lt;/th&gt;
        &lt;th style="width: 20%;"&gt;数量&lt;/th&gt;
        &lt;th style="width: 20%;" class="text-right"&gt;操作&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody s="loop,<abbr class="text-warning" title="loopCheckCombine控件提供loop与check控件的组合功能。">loopCheckCombine</abbr>" s-loop-type="tree" s-loop-tree-indent-width="20"
           s-loop-tree-indent-str="— "
           s-smart-data="ctx:treeData" &gt;
    &lt;tr s-loop-role="row" s-check-role="i" s="datac,row"&gt;
        &lt;td&gt;&lt;input type="checkbox" s-check-role="h"/&gt;&lt;/td&gt;
        &lt;td s-loop-tree-role="indent"&gt;
            &lt;span s s-smart-key="name"&gt;&lt;/span&gt;
        &lt;/td&gt;
        &lt;td s s-smart-key="num"&gt;&lt;/td&gt;
        &lt;td class="text-right"&gt;&lt;a href="#"&gt;编辑&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;tfoot&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;input type="checkbox" s-check-role="checkall-h"/&gt;&lt;/th&gt;
        &lt;td colspan="3"&gt;&lt;/th&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&lt;script type="text/javascript"&gt;
    var treeData = [
        {
            name: "游泳池",num: 20
        },
        {
            name: "美食",
            num: "1239",
            children: [
                {
                    name:"本帮江浙菜",num:454,
                    children: [
                        {name:"蟹宴", num:"30"},
                        {name:"杭帮菜", num:"40"},
                        {name:"绍兴菜", num:"50"},
                    ]
                }
            ]
        },
        {
            name: "足球场",num: 30
        },
        {
            name: "羽毛球馆",num: 70
        },
        {
            name: "汽车",
            num: "304",
            children: [
                {name:"小型车",num:50},
                {name:"紧凑型车",num:40},
                {name:"中型车",num:30},
                {name:"豪华车",num:20}
            ]
        }
    ];
&lt;/script&gt;
</pre>
<hr />
    <h3 id="getChecked" s-window-role="a" title="获取选中项">7. 获取选中项</h3>
    <p class="lead">使用 <code>s.getChecked()</code> 获取选中的行，当单选，则返回选中行的Smart对象，当多选，则返回数组。</p>
    <p><input type="button" class="btn btn-primary" value="获取选中行" s="click" s-click-action="getChecked()" /></p>
    <table id="checkedGrid" s="check" class="table table-bordered table-striped table-hover" style="width: 500px;">
        <thead>
        <tr>
            <th><input type="checkbox" s-check-role="checkall-h"/></th>
            <th style="width: 40%;">姓名</th>
            <th style="width: 30%;">体积</th>
            <th style="width: 30%;">类型</th>
        </tr>
        </thead>
        <tbody s="loop" s-smart-data="ctx:userData" >
        <tr s-loop-role="row" s-check-role="i" s="datac,row">
            <td><input type="checkbox" s-check-role="h"/></td>
            <td s s-smart-key="name"></td>
            <td s s-smart-key="tj"></td>
            <td s s-smart-key="kind"></td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td><input type="checkbox" s-check-role="checkall-h"/></th>
            <td colspan="3"></th>
        </tr>
        </tfoot>
    </table>
    <script type="text/javascript">
        var checkedGrid = S.S("#checkedGrid");
        function getChecked(){
            var checkedRows = checkedGrid.getChecked();
            if(checkedRows.length == 0){
                S.alert("你没有选中行");
                return;
            }
            var tips = [];
            $.each(checkedRows, function(i, smart){
                tips.push(smart.data().name);
            });
            S.alert("你选中了如下行：<br />" + tips.join("<br />"));
        }
    </script>
    <h4>源码</h4>
<pre>
&lt;table <abbr title="check控件" class="text-warning">id="checkedGrid" s="check"</abbr> class="table table-bordered table-striped table-hover" style="width: 500px;"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;input type="checkbox" s-check-role="checkall-h"/&gt;&lt;/th&gt;
        &lt;th style="width: 40%;"&gt;姓名&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;体积&lt;/th&gt;
        &lt;th style="width: 30%;"&gt;类型&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody s="loop" s-smart-data="ctx:userData" &gt;
    &lt;tr s-loop-role="row" <span class="text-warning">s-check-role="i"</span> s="datac,row"&gt;
        &lt;td&gt;&lt;input type="checkbox" <span class="text-warning">s-check-role="h"</span>/&gt;&lt;/td&gt;
        &lt;td s s-smart-key="name"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="tj"&gt;&lt;/td&gt;
        &lt;td s s-smart-key="kind"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table>
&lt;script type="text/javascript"&gt;
    <abbr title="check控件Smart对象" class="text-warning">var checkedGrid = S.S("#checkedGrid");</abbr>
    function getChecked(){
        var checkedRows = <abbr title="获取选中行" class="text-warning">checkedGrid.getChecked();</abbr>
        if(checkedRows.length == 0){
            S.alert("你没有选中行");
            return;
        }
        var tips = [];
        $.each(checkedRows, function(i, smart){
            tips.push(smart.data().name);
        });
        S.alert("你选中了如下行：&lt;br /&gt;" + tips.join("&lt;br /&gt;"));
    }
&lt;/script>
</pre>
<hr />
<h3 id="api" s-window-role="a" title="API">8. API</h3>
<table class="table table-bordered table-striped table-hover">
    <thead>
    <tr>
        <th>API名称</th>
        <th>返回值</th>
        <th>描述</th>
        <th>其他</th>
    </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>getChecked()</code></td>
            <td>返回值是所有选中项的 Smart 对象组成的数组</td>
            <td>获取所有的选中项，返回值是选中项的 Smart 对象组成的数组。</td>
            <td>无</td>
        </tr>
        <tr>
            <td><code>getCheckedData(key)</code></td>
            <td>数组</td>
            <td>当参数key为空时，返回选中项的Smart对象的 <code>data()</code> 方法返回值组成的数组，
                不为空时，返回其 <code>data()[key]</code> 值组成的数组</td>
            <td>无</td>
        </tr>
        <tr>
            <td><code>checkAll()</code></td>
            <td>无</td>
            <td>选中所有项</td>
            <td>无</td>
        </tr>
        <tr>
            <td><code>uncheckAll()</code></td>
            <td>无</td>
            <td>取消选中所有项</td>
            <td>无</td>
        </tr>
    </tbody>
</table>
</div>