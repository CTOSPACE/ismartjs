<meta title="window控件" icon="" />
<script type="text/javascript">

</script>
<div>
    <h2 class="page-header">窗口控件（window）</h2>
    <p><code>window</code> 控件是 Smart RIA 的核心控件，也是 Smart UI 所使用的核心控件，通过该控件可以将模块页面加载进来。</p>
    <h3 id="define" s-window-role="a" title="定义窗口控件">1. 定义窗口控件</h3>
    <p><code>&lt;div s="window" s-window-href="xxx.html" &gt;&lt;/div&gt;</code></p>
    <h4>配置参数</h4>
    <ol>
        <li><code>s</code>： window</li>
        <li><code>href</code>： 该窗口控件加载页面，可以不用填写，不填写时通过api load方法加载url，如 s.load("xxx.html")。</li>
    </ol>
    <hr />
    <h3 id="pageFormat" s-window-role="a" title="模块页面的格式">2. 模块页面格式</h3>
<pre>
&lt;meta icon="" title="页面的标题" description="" width="...px" height="...px" template="true|false" args="[arg1,[arg2,[arg3,[...]]]]" &gt;

&lt;div&gt;
    ...
    ...
&lt;/div&gt;
&lt;input type="button" ... /&gt;
&lt;div&gt;...&lt;/div&gt;

&lt;script type="text/javascript" &gt;
    ...
    ...
&lt;/script&gt;
</pre>
    <p>页面格式中包括 <code>meta</code>、<code>html</code>、<code>script</code> 定义。<code>meta</code> 是页面元数据定义，
        该元数据可供插件使用，如：通过 S.open("url:xxx.html")打开的选项卡的名称就是来自于打开页面的 <span class="text-info">meta</span> 中的 <span class="text-info">title</span> 属性值</p>
    <hr />
    <h3 id="anchor" s-window-role="a" title="配置锚点">3.配置锚点 <small>当打开页面的时候，页面会自动滚动到锚点的位置</small></h3>
    <p>在url的后面加上 <code>#xxx</code> ，打开页面的时候，页面会自动滚动到拥有 <code>id="xxx"</code> 属性的元素的位置。示例如下：</p>
    <p><input s="click" s-click-action="S.open('url:window/close.html#onBeforeClose')" type="button" class="btn btn-primary btn-small" value="打开锚点页面"  />
     打开 <code>close.html</code> 页面，并滚动到 <code>&lt;h3 id="onBeforeClose"&gt;</code> 元素的位置
    </p>
<pre>
&lt;input s="click" s-click-action="<span class="text-info">S.open('url:window/close.html#onBeforeClose')</span>" type="button" class="btn btn-primary btn-small" value="打开锚点页面" /&gt;
</pre>
    <br />
    <p><code>close.html</code> 页面源码片段</p>
<pre>
&lt;h3 <span class="text-info">id="onBeforeClose"</span> class="page-header"&gt;onBeforeClose(fn) ...&lt;/h3&gt;
</pre>
    <br />
    <p>同理，配置 window 控件 url 属性的时候一致，如：<code>&lt;div s="window" s-window-href="widget/window/close.html#onBeforeClose" &gt;&lt;/div&&gt;</code></p>
    <hr />
    <h3 id="api" s-window-role="a" title="API">4. API</h3>
    <table class="table table-bordered table-striped table-hover">
        <thead>
            <tr>
                <th>API名称</th>
                <th>返回值</th>
                <th>描述</th>
                <th>其他</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <code>load(url, [arg1,[arg2,[arg3,[...]]]])</code>
                </td>
                <td>
                    <code>$.Deferred</code> 实例（jQuery的Deferred）
                </td>
                <td>
                    把路径为url的页面加载到当前，当加载完成时则会通过deferred.resolve()进行通知。
                </td>
                <td><a href="javascript:;" s="click" s-click-action="S.open('url:window/load.html')"><code>详细描述</code></a></td>
            </tr>
            <tr>
                <td>
                    <code>refresh()</code>
                </td>
                <td>
                    <code>$.Deferred</code> 实例（jQuery的Deferred）
                </td>
                <td>刷新当前模块页面，当加载完成时则会通过deferred.resolve()进行通知。</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>
                    <code>close(arg1[,arg2[,arg3[,...]])</code>
                </td>
                <td>
                    无
                </td>
                <td>关闭当前页面，不会触发onBeforeClose事件。</td>
                <td><a href="javascript:;" s="click" s-click-action="S.open('url:window/close.html')"><code>详细描述</code></a></td>
            </tr>
            <tr>
                <td>
                    <code>closeWithConfirm(arg1[,arg2[,arg3[,...]])</code>
                </td>
                <td>
                    <code>$.Deferred</code> 实例（jQuery的Deferred）</td>
                <td>关闭当前页面，会触发onBeforeClose事件，询问当前页面是否允许关闭，确认关闭通过deferred.resolve()进行通知，不关闭通过deferred.reject()进行通知。</td>
                <td><a href="javascript:;" s="click" s-click-action="S.open('url:window/close.html#closeWithConfirm')"><code>详细描述</code></a></td>
            </tr>
            <tr>
                <td>
                    <code>preClose()</code>
                </td>
                <td>
                    <code>$.Deferred</code> 实例（jQuery的Deferred）
                </td>
                <td>对当前页面进行预关闭，会触发onBeforeClose事件来确定是否允许关闭当前页面。允许关闭通过deferred.resolve()进行通知，不允许关闭通过deferred.reject()进行通知。</td>
                <td><a href="javascript:;" s="click" s-click-action="S.open('url:window/close.html#preClose')"><code>详细描述</code></a></td>
            </tr>
            <tr>
                <td>
                    <code>onBeforeClose(fn)</code>
                </td>
                <td>无</td>
                <td>注册页面关闭的监听事件。fn接受一个 <code>$.Deferred</code> 参数，
                    调用deferred.resolve()允许关闭,调用deferred.reject()不允许关闭。fn需要返回deferred.promise()。</td>
                <td><a href="javascript:;" s="click" s-click-action="S.open('url:window/close.html#onBeforeClose')"><code>详细描述</code></a></td>
            </tr>
            <tr>
                <td>
                    <code>S(selector)</code>
                </td>
                <td>
                    <code>Smart</code> 实例
                </td>
                <td>根据selector获取当前页面元素的Smart对象。如：想获取当前页面中id为aaa的元素的Smart对象，则调用
                    <code>S.S("#aaa")</code>。</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>
                    <code>N(selector)</code>
                </td>
                <td>
                    <code>jQuery</code> 实例
                </td>
                <td>根据selector获取当前页面元素的jQuery对象。如：想获取当前页面中id为aaa的元素的jQuery对象，则调用
                    <code>S.N("#aaa")</code>。</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>
                    <code>trueId(id)</code>
                </td>
                <td>
                    字符串
                </td>
                <td>获取元素真实的id。页面加载时，会处理掉所有拥有id元素的id值，使得其在整个html中唯一，可以通过此方法获得真正的元素id。</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>
                    <code>setMeta(key, value)</code>
                </td>
                <td>
                    无
                </td>
                <td>设置当前页面的 <code>meta</code> 信息，会触发 meta 事件，并把 key、value作为参数。
                    可以通过 <code>s.on("meta", function(key, value){ ... })</code> 来监听meta的变动。</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>
                    <code>scrollTo(selector|node)</code>
                </td>
                <td>
                    无
                </td>
                <td>将当前页面滚动到指定元素的位置。</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>
                    <code>getAnchors()</code>
                </td>
                <td>
                    无
                </td>
                <td>获取当前页面所有的锚点。通过 <code>s-window-role='a'</code> 来定义该元素是一个锚点，锚点定义还需要设置 <code>id</code> 和 <code>title</code> 属性。</td>
                <td>&nbsp;</td>
            </tr>
        </tbody>
    </table>
</div>