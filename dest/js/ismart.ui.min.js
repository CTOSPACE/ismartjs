/*! iSmartjs version:1.0.0 2014-07-07 http://www.ismartjs.com Email:daigua1028@gmail.com QQ: 175309744*/

!function(a){var b=1e3,c={};Smart.UI={zIndex:function(){return b++},template:function(a){return c[a].clone()},loadTemplate:function(b){return a.get(b,function(b){b=a("<div />").append(b),a("*[s-ui-role]",b).each(function(){var b=a(this);c[b.attr("s-ui-role")]=b})})},backdrop:function(){var b,c=[],d=!1;return function(e){b||(b=a(Smart.UI.template("backdrop")).clone(),b.appendTo("body"));var f=a.Deferred();if(e=void 0==e?!0:e){var g=Smart.UI.zIndex();if(c.push(g),b.show().css("z-index",g),d)return f.resolve();var h=function(){f.resolve()};d=!0;var i=a.support.transition;i&&b[0].offsetWidth,b.addClass("in"),i?b.one(a.support.transition.end,h).emulateTransitionEnd(150):h()}else{if(c.pop(),c.length)return b.css("zIndex",c[c.length]),f.resolve();var h=function(){b.hide(),f.resolve()};d=!1,b.removeClass("in"),a.support.transition?b.one(a.support.transition.end,h).emulateTransitionEnd(150):h()}return f.promise()}}()}}(jQuery),function(){var a={warning:{sign:"glyphicon glyphicon-exclamation-sign",color:"text-warning"},info:{sign:"glyphicon glyphicon-info-sign",color:"text-info"},success:{sign:"glyphicon glyphicon-ok-sign",color:"text-success"},danger:{sign:"glyphicon glyphicon-remove-sign",color:"text-danger"}},b=a.info,c={title:"提示",btnName:"确定"};Smart.extend(Smart.prototype,{alert:function(d,e,f){var g=$.Deferred(),h=Smart.UI.template("alert"),i=a[e]||b;f=f||c,"string"==$.type(f)&&(f=$.extend($.extend({},c),{title:f})),$("*[s-ui-alert-role='title']",h).html(f.title),$("*[s-ui-alert-role='message']",h).html(d),$("*[s-ui-alert-role='sign']",h).addClass(i.color).addClass(i.sign);var j=$("*[s-ui-alert-role='btn']",h);return j.html(f.btnName),Smart.UI.backdrop(),$(h).on("hide.bs.modal",function(){Smart.UI.backdrop(!1).done(function(){g.resolve()})}).on("hidden.bs.modal",function(){$(this).remove()}).on("shown.bs.modal",function(){j.focus()}).css("zIndex",Smart.UI.zIndex()).modal({keyboard:!1,backdrop:!1}),g}})}(),function(a){var b={warning:{sign:"glyphicon glyphicon-exclamation-sign",color:"text-warning"},info:{sign:"glyphicon glyphicon-info-sign",color:"text-info"},success:{sign:"glyphicon glyphicon-ok-sign",color:"text-success"},danger:{sign:"glyphicon glyphicon-remove-sign",color:"text-danger"}},c=b.warning,d={title:"提示",sureBtnName:"确定",cancelBtnName:"取消",sign:"info"};Smart.fn.extend({confirm:function(e,f){var g=a.Deferred(),h=Smart.UI.template("confirm");f=f||d,"string"==a.type(f)&&(f=a.extend(a.extend({},d),{sign:f}));var i=b[f.sign]||c;a("*[s-ui-confirm-role='title']",h).html(f.title),a("*[s-ui-confirm-role='message']",h).html(e),a("*[s-ui-confirm-role='sign']",h).addClass(i.color).addClass(i.sign);var j=a("*[s-ui-confirm-role='sureBtn']",h).html(i.sureBtnName),k=a("*[s-ui-confirm-role='cancelBtn']",h).html(i.cancelBtnName);Smart.UI.backdrop();var l=0;return j.click(function(){l=1,h.modal("hide")}),k.click(function(){l=0,h.modal("hide")}),a(h).on("hide.bs.modal",function(){Smart.UI.backdrop(!1).done(function(){g[l?"resolve":"reject"]()})}).on("hidden.bs.modal",function(){a(this).remove()}).css("zIndex",Smart.UI.zIndex()).modal({keyboard:!1,backdrop:!1}),g}})}(jQuery),function(a){var b="对话框",c=function(b){var c=a('<button class="btn" type="button"></button>');b.id&&c.attr("s-ui-dialog-btn-id",b.id);var d=(b.icon?"<i style='"+b.icon+"'></i>":"")+b.name;return c.html(d),b.style&&c.addClass(b.style||"btn-default"),c.click(b.click),c},d=function(a){Smart.UI.backdrop(),a.on("hide.bs.modal",function(){Smart.UI.backdrop(!1)}).css("zIndex",Smart.UI.zIndex()).modal({keyboard:!1,backdrop:!1})};Smart.fn.extend({dialogOpen:function(){function e(b){return a("button[s-ui-dialog-btn-id='"+b+"']",m)}var f=a.Deferred(),g=Smart.UI.template("dialog"),h=a("<div s='window' />"),i=Smart.of(h),j=a("*[s-ui-dialog-role='body']",g),k=Smart.of(j),l=a("*[s-ui-dialog-role='title']",g),m=a("*[s-ui-dialog-role='footer']",g),n=a("*[s-ui-dialog-role='close']",g),o=a("*[s-ui-dialog-role='dialog']",g);return k.setNode(h),n.click(function(){i.closeWithConfirm()}),i.on("close",function(a){var b=a.deferred,c=Smart.SLICE.call(arguments,1);g.on("hidden.bs.modal",function(){b.resolve(),g.remove(),f.resolve.apply(f,c)}),g.modal("hide"),a.deferred=b.promise()}).on("load",function(){l.html(i.meta.title||b),i.meta.btns&&a.each(i.meta.btns,function(a,b){m.append(c(b))}),i.meta.height&&h.height(i.meta.height),i.meta.width&&h.width(i.meta.width),o.css("position","absolute"),g.appendTo("body"),o.width(g.innerHeight()).css("position","relative"),d(g)}).on("button.disabled",function(a,b){e(b).prop("disabled",!0)}).on("button.enabled",function(a,b){e(b).prop("disabled",!1)}),i.load.apply(i,a.makeArray(arguments)),f}})}(jQuery),function(){var a={setTarget:function(a){this.node=a},onBegin:function(){this.progress=Smart.UI.template("progress").css({position:"absolute",zIndex:Smart.UI.zIndex()}).addClass("s-ui-upload-progressbar"),this.progress.width(this.node.innerWidth()),this.progress.appendTo("body"),this.progressbar=this.progress.children()},onProgress:function(a){this.progress.position({of:this.node,at:"left bottom+5",my:"left top"}),this.progressbar.width(a+"%")},onDone:function(){var a=this;setTimeout(function(){a.progress.fadeOut(function(){$(this).remove()})},1500)}};Smart.extend({uploadSetting:function(b){b=b||{},b.listener&&(a=b.listener)}}),Smart.fn.extend({upload:function(b,c,d){var e=Smart.formData(c);return d=d||a,$.isFunction(d)&&(d={onProgress:d}),d.setTarget&&d.setTarget(c),d.onBegin&&d.onBegin(),this.post(b,e,null,null,{xhr:function(){var a=$.ajaxSettings.xhr();return a.upload.addEventListener("progress",function(a){if(a.lengthComputable){var b=100*a.loaded/a.total;d.onProgress(b,a.total,a.loaded)}},!1),a}}).always(function(){d.onDone&&d.onDone()})}})}();
//# sourceMappingURL=dest/js/ismart.ui.min.map