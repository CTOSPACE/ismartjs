<meta title="upload上传文件" />
<div>
    <h2 class="page-header">upload上传文件插件</h2>
    <p class="lead">upload上传文件插件使用html5的 <code>FormData</code> 对文件进行上传，所以其支持IE10+，大多数的firefox，chrome等浏览器。</p>
    <hr />
    <h3>1. 使用 <code>Smart.post()</code> 上传含有文件域的表单</h3>
    <form id="uploadForm" role="form" enctype="multipart/form-data" class="form-inline" style="width:500px;">
        <div class="form-group">
            <label >图片</label>
            <input type="file" name="avatarFile" id="avatarFile" />
        </div>
        <button type="submit" s="submit,click" s-click-action="submitUploadForm()" class="btn btn-primary">上传</button>
    </form>
    <script type="text/javascript">
        function submitUploadForm(){
            var formData = Smart.formData(S.N('#uploadForm'));
            S.post("plugin/upload.php", formData).done(function(rs){
                if(rs.ok == 1){
                    S.alert("上传成功");
                } else {
                    S.alert("上传失败");
                }
            });
        }
    </script>
    <h4>源码</h4>
<pre>
&lt;form id="uploadForm" role="form" enctype="multipart/form-data" class="form-inline" style="width:500px;"&gt;
    &lt;div class="form-group"&gt;
        &lt;label &gt;图片&lt;/label&gt;
        &lt;input type="file" name="avatarFile" id="avatarFile" /&gt;
    &lt;/div&gt;
    &lt;button type="submit" s="submit,click" s-click-action="submitUploadForm()" class="btn btn-primary"&gt;上传&lt;/button&gt;
&lt;/form&gt;
&lt;script type="text/javascript"&gt;
    function submitUploadForm(){
        <abbr title="通过uploadForm的jQuery对象构建formData" class="text-warning">var formData = Smart.formData(S.N('#uploadForm'));</abbr>
        S.post("plugin/upload.php", formData).done(function(rs){
            if(rs.ok == 1){
                S.alert("上传成功");
            } else {
                S.alert("上传失败");
            }
        });
    }
&lt;/script&gt;
</pre>
   <p>通过 <code>S.post</code> 提交含有文件域的表单需要先根据表单对象构建一个 <code>FormData</code> 对象，
       该对象可以通过 <code>Smart.formData(form)</code> 生成，也可以直接使用 <code>new FormData(form)</code> 生成。</p>
   <hr />
   <h3>2. 使用 <code>Smart.upload(url, fileNode, listener|onProgress)</code> 方法上传文件</h3>
    <p class="lead">使用 <code>Smart.upload()</code> 方法可以单独上传某个文件域，并可以监听文件上传的进度</p>
    <h4>参数说明</h4>
    <ol>
        <li><code>url</code>：要上传的url</li>
        <li><code>fileNode</code>：文件域的jQuery对象或者原生对象</li>
        <li><code>listener|onProgress</code>：文件上传的监听器或者上传进度的监听方法。<br />
            监听器的格式为：
            <pre>
{
    setTarget: function(node){}, //这里设置上传文件域的jQuery对象。即Smart.upload方法中的fileNode参数。
    onBegin: function(){} //开始上传
    onProgress: function(percent, total, loaded){},//上传进度的监听方法，
    onDone: function(){}//上传完成
}</pre>
            监听方法定义同监听器的onProgress方法定义相同
        </li>
    </ol>
    <h4>示例</h4>
    <form class="form-inline">
    <div class="form-group">
        <label >图片</label>
        <input type="file" name="avatarFile"  multiple= multiple id="avatarFile1" />
    </div>
    <button type="submit" id="uploadBtn" s="submit,click" s-click-action="return uploadFile()" class="btn btn-primary">上传</button>
    </form>
    <script type="text/javascript">
        function uploadFile(){
            var fileNode = S.N("#avatarFile1");
            return S.upload("plugin/upload.php", fileNode);
        }
    </script>
    <h4>源码</h4>
<pre>
&lt;div class="form-group"&gt;
    &lt;label &gt;图片&lt;/label&gt;
    &lt;input type="file" name="avatarFile"  multiple= multiple id="avatarFile1" /&gt;
&lt;/div&gt;
&lt;button type="submit" id="uploadBtn" s="submit,click" s-click-action="return uploadFile()" class="btn btn-primary"&gt;上传&lt;/button&gt;
&lt;script type="text/javascript"&gt;
    function uploadFile(){
        var fileNode = S.N("#avatarFile1");
        return S.upload("plugin/upload.php", fileNode);
    }
&lt;/script&gt;
</pre>
    <hr />
    <h3>3. 修改默认的上传文件监听器</h3>
    <p>使用 <code>Smart.uploadSetting({listener: {...}})</code> 来设定默认的上传文件监听器。listener的格式如下：</p>
<pre>
Smart.uploadSetting({
    listener: {
        setTarget: function(node){}, //这里设置上传文件域的jQuery对象。即Smart.upload方法中的fileNode参数。
        onBegin: function(){} //开始上传
        onProgress: function(percent, total, loaded){},//上传进度的监听方法，
        onDone: function(){}//上传完成
    }
});
</pre>
</div>