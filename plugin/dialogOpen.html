<meta title="dialogOpen控件" />
<div>
    <h2>dialogOpen <small>使用弹出框打开模块页面</small></h2>
    <p class="lead">通过弹出框的形式打开模块页面。</p>
    <h3 id="call" s-window-role="a" title="调用方法">1. 调用方法</h3>
    <p><code>S.dialogOpen(url[,openArgs])</code></p>
    <h4>a. 参数说明</h4>
    <ol>
        <li><code>url</code>：要打开的模块页面的url</li>
        <li><code>[,openArgs]</code>：要传递给打开的模块页面的参数。可以参考 <code>window</code> 控件。</li>
    </ol>
    <h4>b. 对话框的基本信息都来自于打开页面的 <code>meta</code> 定义，这些信息包括：</h4>
    <ol>
        <li><code>icon</code>： 来自于meta的icon值</li>
        <li><code>title</code>： 来自于meta的title值</li>
        <li><code>width</code>： 来自于meta的width值</li>
        <li><code>height</code>： 来自于meta的height值</li>
        <li><code>btns</code>： 对话框按钮，来自于meta的 btns 值</li>
    </ol>
    <p>使用 <code>meta</code> 的 <code>btns</code> 值来定义对话框的按钮，如下：</p>
<pre>
&lt;script type="text/javascript"&gt;
//设置对话框的按钮
this.meta.btns = [
    {
        name: "关闭",
        style: "btn-primary",
        click: function(){
            S.close();
        }
    }
]
&lt;/script&gt;
</pre>
    <h4 id="button" s-window-role="a" title="按钮的格式">c. 按钮的格式</h4>
<pre>
{
    id: "",//button id，可以通过triiger('button.disabled', id)和trigger('button.enabled', id)来设置按钮的可用状态
    name: "",//按钮名称
    style: "",//按钮的样式，即按钮的class
    click: function(){..}//按钮的动作。
    icon: ""//按钮的图标
}
</pre>
    <h3 id="example" s-window-role="a" title="示例">2. 示例</h3>
    <p><input type="button" class="btn btn-primary btn-small" value="打开页面" s="click" s-click-action="dialogOpen()"  /></p>
    <script type="text/javascript">
        function dialogOpen(){
            S.dialogOpen("plugin/dialog-open/example.html");
        }
    </script>
    <h4>源码：</h4>
<pre>
&lt;p&gt;&lt;input type="button" class="btn btn-primary btn-small" value="打开页面" s="click" s-click-action="dialogOpen()"  /&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;
    function dialogOpen(){
        S.dialogOpen("plugin/dialog-open/example.html");
    }
&lt;/script&gt;
</pre>
<br />
<p><code>example.html</code> 的源码</p>
<pre>
&lt;meta title="dialogOpen示例页面1" width="600px" height="200px" /&gt;
&lt;h2&gt;
我是通过dialogOpen打开的页面。
&lt;/h2&gt;
&lt;script type="text/javascript"&gt;
//设置对话框的按钮
this.meta.btns = [
    {
        name: "关闭",
        style: "btn-primary",
        click: function(){
            S.close();
        }
    }
]
&lt;/script&gt;
</pre>
    <h3 id="argAndCallback" title="传递参数并注册回调" s-window-role="a">2. 传递参数并注册回调</h3>
    <p class="lead">打开对话框页面的时候可以注册回调函数，当页面关闭的时候，执行回调函数并传参。</p>
    <p><input type="button" class="btn btn-primary btn-small" value="打开页面" s="click" s-click-action="dialogOpenWithArgAndCallback()"  /></p>
    <script type="text/javascript">
        function dialogOpenWithArgAndCallback(){
            S.dialogOpen("plugin/dialog-open/example-arg-callback.html", {title:"Hello", who:"iSmart JS"}).done(function(fell){
                S.alert(fell);//这里的fell是通过 example-arg-callback.html调用S.close(arg)关闭的时候传递进来的arg参数值。
            });
        }
    </script>
    <h4>源码：</h4>
<pre>
&lt;p&gt;&lt;input type="button" class="btn btn-primary btn-small" value="打开页面" s="click" s-click-action="dialogOpenWithArgAndCallback()"  /&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;
    function dialogOpenWithArgAndCallback(){
        S.dialogOpen("plugin/dialog-open/example-arg-callback.html", <abbr class="text-warning" title="打开页面时传递的参数">{title:"Hello", who:"iSmart JS"}</abbr>).<abbr class="text-warning" title="注册页面关闭回调方法">done</abbr>(function(<abbr class="text-warning" title="回调的参数">fell</abbr>){
            S.alert(fell);//这里的fell是通过 example-arg-callback.html调用S.close(arg)关闭的时候传递进来的arg参数值。
        });
    }
&lt;/script&gt;
</pre>
    <p>通过 <code>S.dialogOpen('...').done(function(arg){...})</code> 注册对话框关闭的回调，回调方法的参数是调用 <code>S.close(arg)</code> 传递进来的参数。</p>
    <p><code>example-arg-callback.html</code> 的源码</p>
<pre>
&lt;meta title="{%=title+','+who%}" width="600px" height="200px" args="title, who" /&gt;
&lt;h2&gt;
    这个是传递参数和注册回调页面。
&lt;/h2&gt;
&lt;script type="text/javascript"&gt;
    this.meta.btns = [
        {
            name: who,//该参数值来自于meta的args定义
            style: "btn-primary",
            click: function(){
                <abbr class="text-warning" title="这里关闭页面的时候传递回调参数">S.close("So Pretty, So Powerful, So Easy");</abbr>
            }
        }
    ]
&lt;/script&gt;
</pre>
    <h3 id="buttonDisabled" title="设置对话框按钮可用状态" s-window-role="a">3. 设置对话框按钮可用状态</h3>
    <p>通过发送相关事件，可以设置对话框按钮的可用状态，事件如下：</p>
    <ol>
        <li><code>dialog.btn.disable</code> 事件，使按钮禁用，需要按钮id作为参数进行触发，如：<code>S.trigger('dialog.btn.disable', buttonId)</code></li>
        <li><code>dialog.btn.enable</code> 事件，使按钮可用，需要按钮id作为参数进行触发，如：<code>S.trigger('dialog.btn.enable', buttonId)</code></li>
    </ol>
    <p><input type="button" class="btn btn-primary" value="打开页面" s="click" s-click-action="dialogOpenButton()" /></p>
    <script type="text/javascript">
        function dialogOpenButton(){
            S.dialogOpen("plugin/dialog-open/button.html");
        }
    </script>
    <h4>源码</h4>
<pre>
&lt;p&gt;&lt;input type="button" class="btn btn-primary" value="打开页面" s="click" s-click-action="dialogOpenButton()" /&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;
    function dialogOpenButton(){
        S.dialogOpen("plugin/dialog-open/button.html");
    }
&lt;/script&gt;
</pre>
<p><code>button.html</code> 源码</p>
<pre>
&lt;meta title="禁用/可用按钮示例" width="500px" /&gt;
&lt;div&gt;
    &lt;h2 class="page-header"&gt;禁用/可用对话按钮&lt;/h2&gt;
    &lt;p&gt;
        &lt;input s="click" s-click-action="disableBtn(true)" type="button" class="btn btn-default" value="禁用按钮" /&gt;
        &lt;input s="click" s-click-action="disableBtn(false)" type="button" class="btn btn-primary" value="使按钮可用" /&gt;
    &lt;/p&gt;
    &lt;script type="text/javascript"&gt;
        this.meta.btns = [
            {
                <abbr class="text-warning" title="按钮的id">id: "sureBtn",</abbr>
                name: "确定",
                style: "btn-primary",
                click: function(){
                    S.close();
                }
            }
        ];
        function disableBtn(flag){
            <abbr class="text-warning" title="禁用/可用按钮">S.trigger("dialog.btn." + (flag ? "disable" : "enable"), "sureBtn");</abbr>
        }
    &lt;/script&gt;
&lt;/div&gt;    
</pre>
</div>